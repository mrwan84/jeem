// ============================================
// Jeem Test Suite - Objects & Object Methods
// ============================================

print("=== OBJECTS TEST ===\n")

// --- Object Creation ---
print("--- Object Creation ---")
empty = {}
person = {name: "Alice", age: 30, city: "Berlin"}
print("empty:", empty)
print("person:", person)

// --- Object Access ---
print("\n--- Object Access ---")
print("person.name:", person.name)
print("person.age:", person.age)
print("person['city']:", person["city"])

// --- Dynamic Key Access ---
print("\n--- Dynamic Key Access ---")
key = "name"
print("person[key]:", person[key])

// --- Object Modification ---
print("\n--- Object Modification ---")
person.age = 31
print("person.age = 31:", person)
person["email"] = "alice@example.com"
print("added email:", person)

// --- Nested Objects ---
print("\n--- Nested Objects ---")
company = {
    name: "TechCorp",
    address: {
        street: "123 Main St",
        city: "Berlin",
        zip: "10115"
    },
    employees: [
        {name: "Alice", role: "Engineer"},
        {name: "Bob", role: "Designer"}
    ]
}
print("company.name:", company.name)
print("company.address.city:", company.address.city)
print("company.employees[0].name:", company.employees[0].name)

// --- Object with Functions ---
print("\n--- Object with Functions ---")
calculator = {
    value: 0,
    add: (a, b) => a + b,
    subtract: (a, b) => a - b,
    multiply: (a, b) => a * b,
    divide: (a, b) => a / b
}
print("calc.add(10, 5):", calculator.add(10, 5))
print("calc.subtract(10, 5):", calculator.subtract(10, 5))

// --- Object Keys ---
print("\n--- .keys() ---")
obj = {a: 1, b: 2, c: 3}
print("obj:", obj)
print("keys(obj):", keys(obj))
print("obj.keys():", obj.keys())

// --- Object Values ---
print("\n--- .values() ---")
print("values(obj):", values(obj))
print("obj.values():", obj.values())

// --- Object Entries ---
print("\n--- .entries() ---")
print("obj.entries():", obj.entries())

// --- Has Key ---
print("\n--- hasKey / hasOwnProperty ---")
print("hasKey(obj, 'a'):", hasKey(obj, "a"))
print("hasKey(obj, 'z'):", hasKey(obj, "z"))
print("obj.hasOwnProperty('b'):", obj.hasOwnProperty("b"))
print("obj.hasOwnProperty('x'):", obj.hasOwnProperty("x"))

// --- Delete Key ---
print("\n--- delete ---")
obj2 = {x: 1, y: 2, z: 3}
print("before delete:", obj2)
delete(obj2, "y")
print("after delete 'y':", obj2)

// --- Clone ---
print("\n--- clone ---")
original = {a: 1, b: [1, 2, 3], c: {nested: true}}
print("original:", original)
cloned = clone(original)
print("cloned:", cloned)
cloned.a = 999
cloned.b[0] = 999
print("after modify clone:")
print("  original:", original)
print("  cloned:", cloned)

// --- Iterating Objects ---
print("\n--- Iterating Objects ---")
config = {host: "localhost", port: 8080, debug: true}
print("for key in config:")
for key in config {
    print("  " + key)
}

// --- Object Length ---
print("\n--- Object Length ---")
print("config.len():", config.len())

// --- Object Comparison ---
print("\n--- Object Comparison ---")
obj_a = {x: 1}
obj_b = {x: 1}
obj_c = obj_a
print("obj_a:", obj_a)
print("obj_b:", obj_b)
print("obj_a == obj_b:", obj_a == obj_b)
print("obj_a == obj_c:", obj_a == obj_c)

// --- Complex Objects ---
print("\n--- Complex Objects ---")
database = {
    users: [
        {id: 1, name: "Alice", roles: ["admin", "user"]},
        {id: 2, name: "Bob", roles: ["user"]},
        {id: 3, name: "Charlie", roles: ["user", "moderator"]}
    ],
    settings: {
        maxUsers: 100,
        features: {
            darkMode: true,
            notifications: true
        }
    }
}

print("Total users:", database.users.len())
print("First user:", database.users[0].name)
print("Dark mode:", database.settings.features.darkMode)

// Find admin users
admins = database.users.filter(u => u.roles.includes("admin"))
print("Admins:", admins.map(u => u.name))

print("\n=== OBJECTS TEST COMPLETE ===")
